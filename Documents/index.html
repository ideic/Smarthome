<html>  <head>	<title>Smarthome</title>  </head>  <body>	<h1>Introduction</h1>	<p>		This document is the entry point of SmartHome documentation. Describes the components and describes how to use it.	</p>	<h1>Components</h1>	<p>		Usage starts with DesktopUI Application.		DesktopUI is an WPF application which sits on top of <a href="http://graphviz.org/">Graphviz</a>, you have to install it.		</br>		Then you can generate Arduino source code, that must be upload to Nano board, and you can use it.	</p>	<h2>Desktop UI</h2>	<p>		With this app you can create Locations, Lights and switches.		<h3>Locations</h3>		<p>Places in the house where you want to deploy Lamp or Switch.</p>		<h3>Lights</h3>		<p>Lamps, can be anything that you have to control by Relay (230 V).</p>		<h3>Switch</h3>		<p>Device, that you can turn on and off. It brakes or conducts voltage on a wire. Wire has 3,3 volt.</p>	</p>	<p>		With this app you can assign Lights and Switches to different Locations, then you can set up which switches controls which lights.</br>		During your setUp connections you can see your setting on a nice graph.</br>		Certainly you can save or load your settings.</br>		As a final step you can set up how many Ardiuno groups you would to handle (could depends on your phisical arrangements), that means you assign locations to arduino groups.</br>		When you press generate, it creates Arduino folders (Server and clients), that you can open with Arduino IDE, and with that tool you can upload binaries to your Nano board.	</p>	<h2>Arduino</h2>	<p>		The following architecture was applied:</br>		Server continously queries Switches using an RS485 communication device. When a switch changes its state, then Server has to change the Relays state that belongs to the same segment.</br>			</p>	<h3>Server</h3>	<p>		Server has Segments which are groups, switches and relays are assigned to it. When a switch status is changed Server sends a relay state control message to the clients.</br>		Server sends messages to client arduinos. Every client Arduino can handle 6 switch and 3 relays. Every switch and relay has its on address. Server message contains the recipient address and the control message, which could be a get or a set message. Messages are checked with CRC. Invalid messages are dropped.</br>		A server stands of :</br>		<ul>			<li>Arduino nano</li>			<li>Power supply 5 V</li>			<li>RS485 device (PIN 2,3,4 used for it)</li>		</ul>	</p>	<h3>Client</h3>	<p>		A client stands of :</br>		<ul>			<li>Arduino nano</li>			<li>Power supply 5V</li>			<li>RS485 device (PIN 2,3,4)</li>			<li>PIN 5,6,7,8,9,10 handles switches</li>			<li>PIN 11,12,13 handles relays</li>		</ul>		A switch stands of :</br>		<ul>			<li>4n25 chip</li>			<li>Power supply 3,3V</li>			<li>Leg 1 of 4N25 is conected to Power supply through 120 Ohm resistor, also this leg goes to switch</li>			<li>Leg 5 of 4N25 is connected to Arduino of 4n25</li>			<li>Leg 4 and 2 of 4N25 are connected o GND</li>		</ul>		An simples CAT5 cable goes to switch.</br>		I use Relay SRD-05VDC-SL-C Songle Relay, which needs and Power 5 V an GND and a Contol wire which comes from Arduino PIN.	</p>  </body></html>